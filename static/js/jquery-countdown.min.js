(function(a){var f="countdown";var i=0;var e=1;var h=2;var b=3;var c=4;var d=5;var g=6;a.JQPlugin.createPlugin({name:f,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,padZeroes:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false}},_getters:["getTimes"],_rtlClass:f+"-rtl",_sectionClass:f+"-section",_amountClass:f+"-amount",_periodClass:f+"-period",_rowClass:f+"-row",_holdingClass:f+"-holding",_showClass:f+"-show",_descrClass:f+"-descr",_timerElems:[],_init:function(){var n=this;this._super();this._serverSyncs=[];var k=(typeof Date.now=="function"?Date.now:function(){return new Date().getTime()});var l=(window.performance&&typeof window.performance.now=="function");function o(q){var p=(q<1000000000000?(l?(performance.now()+performance.timing.navigationStart):k()):q||k());if(p-j>=1000){n._updateElems();j=p}m(o)}var m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var j=0;if(!m||a.noRequestAnimationFrame){a.noRequestAnimationFrame=null;setInterval(function(){n._updateElems()},980)}else{j=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||k();m(o)}},UTCDate:function(q,r,n,k,l,m,p,o){if(typeof r=="object"&&r.constructor==Date){o=r.getMilliseconds();p=r.getSeconds();m=r.getMinutes();l=r.getHours();k=r.getDate();n=r.getMonth();r=r.getFullYear()}var j=new Date();j.setUTCFullYear(r);j.setUTCDate(1);j.setUTCMonth(n||0);j.setUTCDate(k||1);j.setUTCHours(l||0);j.setUTCMinutes((m||0)-(Math.abs(q)<30?q*60:q));j.setUTCSeconds(p||0);j.setUTCMilliseconds(o||0);return j},periodsToSeconds:function(j){return j[0]*31557600+j[1]*2629800+j[2]*604800+j[3]*86400+j[4]*3600+j[5]*60+j[6]},resync:function(){var k=this;a("."+this._getMarker()).each(function(){var m=a.data(this,k.name);if(m.options.serverSync){var o=null;for(var l=0;l<k._serverSyncs.length;l++){if(k._serverSyncs[l][0]==m.options.serverSync){o=k._serverSyncs[l];break}}if(o[2]==null){var n=(a.isFunction(m.options.serverSync)?m.options.serverSync.apply(this,[]):null);o[2]=(n?new Date().getTime()-n.getTime():0)-o[1]}if(m._since){m._since.setMilliseconds(m._since.getMilliseconds()+o[2])}m._until.setMilliseconds(m._until.getMilliseconds()+o[2])}});for(var j=0;j<k._serverSyncs.length;j++){if(k._serverSyncs[j][2]!=null){k._serverSyncs[j][1]+=k._serverSyncs[j][2];delete k._serverSyncs[j][2]}}},_instSettings:function(j,k){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(j){if(!this._hasElem(j)){this._timerElems.push(j)}},_hasElem:function(j){return(a.inArray(j,this._timerElems)>-1)},_removeElem:function(j){this._timerElems=a.map(this._timerElems,function(k){return(k==j?null:k)})},_updateElems:function(){for(var j=this._timerElems.length-1;j>=0;j--){this._updateCountdown(this._timerElems[j])}},_optionsChanged:function(j,k,m){if(m.layout){m.layout=m.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")}this._resetExtraLabels(k.options,m);var n=(k.options.timezone!=m.timezone);a.extend(k.options,m);this._adjustSettings(j,k,m.until!=null||m.since!=null||n);var l=new Date();if((k._since&&k._since<l)||(k._until&&k._until>l)){this._addElem(j[0])}this._updateCountdown(j,k)},_updateCountdown:function(j,l){j=j.jquery?j:a(j);l=l||this._getInst(j);if(!l){return}j.html(this._generateHTML(l)).toggleClass(this._rtlClass,l.options.isRTL);if(a.isFunction(l.options.onTick)){var n=l._hold!="lap"?l._periods:this._calculatePeriods(l,l._show,l.options.significant,new Date());if(l.options.tickInterval==1||this.periodsToSeconds(n)%l.options.tickInterval==0){l.options.onTick.apply(j[0],[n])}}var k=l._hold!="pause"&&(l._since?l._now.getTime()<l._since.getTime():l._now.getTime()>=l._until.getTime());if(k&&!l._expiring){l._expiring=true;if(this._hasElem(j[0])||l.options.alwaysExpire){this._removeElem(j[0]);if(a.isFunction(l.options.onExpiry)){l.options.onExpiry.apply(j[0],[])}if(l.options.expiryText){var m=l.options.layout;l.options.layout=l.options.expiryText;this._updateCountdown(j[0],l);l.options.layout=m}if(l.options.expiryUrl){window.location=l.options.expiryUrl}}l._expiring=false}else{if(l._hold=="pause"){this._removeElem(j[0])}}},_resetExtraLabels:function(j,l){for(var k in l){if(k.match(/[Ll]abels[02-9]|compactLabels1/)){j[k]=l[k]}}for(var k in j){if(k.match(/[Ll]abels[02-9]|compactLabels1/)&&typeof l[k]==="undefined"){j[k]=null}}},_adjustSettings:function(j,l,n){var o=null;for(var k=0;k<this._serverSyncs.length;k++){if(this._serverSyncs[k][0]==l.options.serverSync){o=this._serverSyncs[k][1];break}}if(o!=null){var p=(l.options.serverSync?o:0);var m=new Date()}else{var q=(a.isFunction(l.options.serverSync)?l.options.serverSync.apply(j[0],[]):null);var m=new Date();var p=(q?m.getTime()-q.getTime():0);this._serverSyncs.push([l.options.serverSync,p])}var r=l.options.timezone;r=(r==null?-m.getTimezoneOffset():r);if(n||(!n&&l._until==null&&l._since==null)){l._since=l.options.since;if(l._since!=null){l._since=this.UTCDate(r,this._determineTime(l._since,null));if(l._since&&p){l._since.setMilliseconds(l._since.getMilliseconds()+p)}}l._until=this.UTCDate(r,this._determineTime(l.options.until,m));if(p){l._until.setMilliseconds(l._until.getMilliseconds()+p)}}l._show=this._determineShow(l)},_preDestroy:function(j,k){this._removeElem(j[0]);j.empty()},pause:function(j){this._hold(j,"pause")},lap:function(j){this._hold(j,"lap")},resume:function(j){this._hold(j,null)},toggle:function(j){var k=a.data(j,this.name)||{};this[!k._hold?"pause":"resume"](j)},toggleLap:function(j){var k=a.data(j,this.name)||{};this[!k._hold?"lap":"resume"](j)},_hold:function(j,k){var l=a.data(j,this.name);if(l){if(l._hold=="pause"&&!k){l._periods=l._savePeriods;var m=(l._since?"-":"+");l[l._since?"_since":"_until"]=this._determineTime(m+l._periods[0]+"y"+m+l._periods[1]+"o"+m+l._periods[2]+"w"+m+l._periods[3]+"d"+m+l._periods[4]+"h"+m+l._periods[5]+"m"+m+l._periods[6]+"s");this._addElem(j)}l._hold=k;l._savePeriods=(k=="pause"?l._periods:null);a.data(j,this.name,l);this._updateCountdown(j,l)}},getTimes:function(j){var k=a.data(j,this.name);return(!k?null:(k._hold=="pause"?k._savePeriods:(!k._hold?k._periods:this._calculatePeriods(k,k._show,k.options.significant,new Date()))))},_determineTime:function(n,j){var m=this;var k=function(p){var q=new Date();q.setTime(q.getTime()+p*1000);return q};var l=function(u){u=u.toLowerCase();var x=new Date();var y=x.getFullYear();var t=x.getMonth();var p=x.getDate();var q=x.getHours();var s=x.getMinutes();var w=x.getSeconds();var v=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var r=v.exec(u);while(r){switch(r[2]||"s"){case"s":w+=parseInt(r[1],10);break;case"m":s+=parseInt(r[1],10);break;case"h":q+=parseInt(r[1],10);break;case"d":p+=parseInt(r[1],10);break;case"w":p+=parseInt(r[1],10)*7;break;case"o":t+=parseInt(r[1],10);p=Math.min(p,m._getDaysInMonth(y,t));break;case"y":y+=parseInt(r[1],10);p=Math.min(p,m._getDaysInMonth(y,t));break}r=v.exec(u)}return new Date(y,t,p,q,s,w,0)};var o=(n==null?j:(typeof n=="string"?l(n):(typeof n=="number"?k(n):n)));if(o){o.setMilliseconds(0)}return o},_getDaysInMonth:function(k,j){return 32-new Date(k,j,32).getDate()},_normalLabels:function(j){return j},_generateHTML:function(j){var n=this;j._periods=(j._hold?j._periods:this._calculatePeriods(j,j._show,j.options.significant,new Date()));var s=false;var q=0;var u=j.options.significant;var o=a.extend({},j._show);for(var m=i;m<=g;m++){s|=(j._show[m]=="?"&&j._periods[m]>0);o[m]=(j._show[m]=="?"&&!s?null:j._show[m]);q+=(o[m]?1:0);u-=(j._periods[m]>0?1:0)}var t=[false,false,false,false,false,false,false];for(var m=g;m>=i;m--){if(j._show[m]){if(j._periods[m]){t[m]=true}else{t[m]=u>0;u--}}}var k=(j.options.compact?j.options.compactLabels:j.options.labels);var v=j.options.whichLabels||this._normalLabels;var p=function(x){var w=j.options["compactLabels"+v(j._periods[x])];return(o[x]?n._translateDigits(j,j._periods[x])+(w?w[x]:k[x])+" ":"")};var l=(j.options.padZeroes?2:1);var r=function(x){var w=j.options["labels"+v(j._periods[x])];return((!j.options.significant&&o[x])||(j.options.significant&&t[x])?'<span class="'+n._sectionClass+'"><span class="'+n._amountClass+'">'+n._minDigits(j,j._periods[x],l)+'</span><span class="'+n._periodClass+'">'+(w?w[x]:k[x])+"</span></span>":"")};return(j.options.layout?this._buildLayout(j,o,j.options.layout,j.options.compact,j.options.significant,t):((j.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(j._hold?" "+this._holdingClass:"")+'">'+p(i)+p(e)+p(h)+p(b)+(o[c]?this._minDigits(j,j._periods[c],2):"")+(o[d]?(o[c]?j.options.timeSeparator:"")+this._minDigits(j,j._periods[d],2):"")+(o[g]?(o[c]||o[d]?j.options.timeSeparator:"")+this._minDigits(j,j._periods[g],2):""):'<span class="'+this._rowClass+" "+this._showClass+(j.options.significant||q)+(j._hold?" "+this._holdingClass:"")+'">'+r(i)+r(e)+r(h)+r(b)+r(c)+r(d)+r(g))+"</span>"+(j.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+j.options.description+"</span>":"")))},_buildLayout:function(n,t,q,j,v,u){var p=n.options[j?"compactLabels":"labels"];var x=n.options.whichLabels||this._normalLabels;var o=function(y){return(n.options[(j?"compactLabels":"labels")+x(n._periods[y])]||p)[y]};var k=function(z,y){return n.options.digits[Math.floor(z/y)%10]};var w={desc:n.options.description,sep:n.options.timeSeparator,yl:o(i),yn:this._minDigits(n,n._periods[i],1),ynn:this._minDigits(n,n._periods[i],2),ynnn:this._minDigits(n,n._periods[i],3),y1:k(n._periods[i],1),y10:k(n._periods[i],10),y100:k(n._periods[i],100),y1000:k(n._periods[i],1000),ol:o(e),on:this._minDigits(n,n._periods[e],1),onn:this._minDigits(n,n._periods[e],2),onnn:this._minDigits(n,n._periods[e],3),o1:k(n._periods[e],1),o10:k(n._periods[e],10),o100:k(n._periods[e],100),o1000:k(n._periods[e],1000),wl:o(h),wn:this._minDigits(n,n._periods[h],1),wnn:this._minDigits(n,n._periods[h],2),wnnn:this._minDigits(n,n._periods[h],3),w1:k(n._periods[h],1),w10:k(n._periods[h],10),w100:k(n._periods[h],100),w1000:k(n._periods[h],1000),dl:o(b),dn:this._minDigits(n,n._periods[b],1),dnn:this._minDigits(n,n._periods[b],2),dnnn:this._minDigits(n,n._periods[b],3),d1:k(n._periods[b],1),d10:k(n._periods[b],10),d100:k(n._periods[b],100),d1000:k(n._periods[b],1000),hl:o(c),hn:this._minDigits(n,n._periods[c],1),hnn:this._minDigits(n,n._periods[c],2),hnnn:this._minDigits(n,n._periods[c],3),h1:k(n._periods[c],1),h10:k(n._periods[c],10),h100:k(n._periods[c],100),h1000:k(n._periods[c],1000),ml:o(d),mn:this._minDigits(n,n._periods[d],1),mnn:this._minDigits(n,n._periods[d],2),mnnn:this._minDigits(n,n._periods[d],3),m1:k(n._periods[d],1),m10:k(n._periods[d],10),m100:k(n._periods[d],100),m1000:k(n._periods[d],1000),sl:o(g),sn:this._minDigits(n,n._periods[g],1),snn:this._minDigits(n,n._periods[g],2),snnn:this._minDigits(n,n._periods[g],3),s1:k(n._periods[g],1),s10:k(n._periods[g],10),s100:k(n._periods[g],100),s1000:k(n._periods[g],1000)};var l=q;for(var m=i;m<=g;m++){var r="yowdhms".charAt(m);var s=new RegExp("\\{"+r+"<\\}([\\s\\S]*)\\{"+r+">\\}","g");l=l.replace(s,((!v&&t[m])||(v&&u[m])?"$1":""))}a.each(w,function(y,A){var z=new RegExp("\\{"+y+"\\}","g");l=l.replace(z,A)});return l},_minDigits:function(j,l,k){l=""+l;if(l.length>=k){return this._translateDigits(j,l)}l="0000000000"+l;return this._translateDigits(j,l.substr(l.length-k))},_translateDigits:function(j,k){return(""+k).replace(/[0-9]/g,function(l){return j.options.digits[l]})},_determineShow:function(k){var j=k.options.format;var l=[];l[i]=(j.match("y")?"?":(j.match("Y")?"!":null));l[e]=(j.match("o")?"?":(j.match("O")?"!":null));l[h]=(j.match("w")?"?":(j.match("W")?"!":null));l[b]=(j.match("d")?"?":(j.match("D")?"!":null));l[c]=(j.match("h")?"?":(j.match("H")?"!":null));l[d]=(j.match("m")?"?":(j.match("M")?"!":null));l[g]=(j.match("s")?"?":(j.match("S")?"!":null));return l},_calculatePeriods:function(m,y,z,u){m._now=u;m._now.setMilliseconds(0);var A=new Date(m._now.getTime());if(m._since){if(u.getTime()<m._since.getTime()){m._now=u=A}else{u=m._since}}else{A.setTime(m._until.getTime());if(u.getTime()>m._until.getTime()){m._now=u=A}}var w=[0,0,0,0,0,0,0];if(y[i]||y[e]){var o=this._getDaysInMonth(u.getFullYear(),u.getMonth());var q=this._getDaysInMonth(A.getFullYear(),A.getMonth());var x=(A.getDate()==u.getDate()||(A.getDate()>=Math.min(o,q)&&u.getDate()>=Math.min(o,q)));var l=function(C){return(C.getHours()*60+C.getMinutes())*60+C.getSeconds()};var s=Math.max(0,(A.getFullYear()-u.getFullYear())*12+A.getMonth()-u.getMonth()+((A.getDate()<u.getDate()&&!x)||(x&&l(A)<l(u))?-1:0));w[i]=(y[i]?Math.floor(s/12):0);w[e]=(y[e]?s-w[i]*12:0);u=new Date(u.getTime());var B=(u.getDate()==o);var n=this._getDaysInMonth(u.getFullYear()+w[i],u.getMonth()+w[e]);if(u.getDate()>n){u.setDate(n)}u.setFullYear(u.getFullYear()+w[i]);u.setMonth(u.getMonth()+w[e]);if(B){u.setDate(n)}}var j=Math.floor((A.getTime()-u.getTime())/1000);var k=function(D,C){w[D]=(y[D]?Math.floor(j/C):0);j-=w[D]*C};k(h,604800);k(b,86400);k(c,3600);k(d,60);k(g,1);if(j>0&&!m._since){var t=[1,12,4.3482,7,24,60,60];var p=g;var r=1;for(var v=g;v>=i;v--){if(y[v]){if(w[p]>=r){w[p]=0;j=1}if(j>0){w[v]++;j=0;p=v;r=1}}r*=t[v]}}if(z){for(var v=i;v<=g;v++){if(z&&w[v]){z--}else{if(!z){w[v]=0}}}}return w}})})(jQuery);